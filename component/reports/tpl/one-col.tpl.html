<div class="form-group" ng-repeat="param in vm.report.params" ng-switch="param.type"
     ng-class="{'has-error': paramsForm.{{param.name}}.$invalid}">

    <label class="control-label" for="{{param.name}}" ng-hide="vm.hideTitle(param)">{{param.title}}</label>
    <input class="form-control" name="{{param.name}}" id="{{param.name}}"
           ng-hide="vm.hideParam(param)" ng-model="param.value" ng-required="vm.getRequired(param)"
           ng-switch-when="NUMBER" type="number"/>

    <input class="form-control" name="{{param.name}}" id="{{param.name}}"
           ng-hide="vm.hideParam(param)" ng-model="param.value" ng-required="vm.getRequired(param)"
           ng-switch-when="TEXT"/>

    <div class="input-group" ng-switch-when="DATE" ng-hide="vm.hideParam(param)">
        <input id="{{param.name}}" class="form-control" name="{{param.name}}"
               uib-datepicker-popup="MM/dd/yyyy" ng-required="vm.getRequired(param)"
               ng-model="param.value" is-open="param.datePickerOpenStatus"/>
        <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="vm.openCalendar($index)">
                    <i class="glyphicon glyphicon-calendar"></i></button>
                </span>
    </div>

    <div ng-switch-when="SINGLE_SELECT" ng-hide="vm.hideParam(param)">
        <ui-select name="{{param.name}}" id="{{param.name}}" ng-model="param.value"
                   ui-select-required="vm.getRequired(param)" close-on-select="true" title="{{param.title}}">
            <ui-select-match placeholder="{{param.placeholder}}">{{vm.getSelectTitleField(param,
                $select.selected)}}
            </ui-select-match>
            <ui-select-choices repeat="element in param.list | filter:$select.search | limitTo: 500">
                <div
                    ng-bind-html="vm.getSelectTitleField(param, element) | highlight: $select.search"></div>
                <!--<small ng-bind-html="vm.getSelectTitleField(param, element) | highlight: $select.search"></small>-->
                <!--{{vm.getSelectTitleField(param, element)}}-->
            </ui-select-choices>
        </ui-select>
    </div>

    <select class="form-control" name="{{param.name}}" id="{{param.name}}" ng-hide="vm.hideParam(param)"
            ng-switch-when="LIST" ng-model="param.value"
            ng-options="item.id as item.name for item in param.list"
            ng-required="vm.getRequired(param)">
    </select>

    <div ng-switch-when="MULTI_SELECT" ng-hide="vm.hideParam(param)">
        <ui-select name="{{param.name}}" id="{{param.name}}" multiple ng-model="param.value"
                   close-on-select="false" title="{{param.title}}" ui-select-required="vm.getRequired(param)">
            <ui-select-match placeholder="{{param.placeholder}}">
                {{vm.getSelectTitleField(param, $item)}}
            </ui-select-match>
            <ui-select-choices repeat="element in param.list | filter:$select.search">
                {{vm.getSelectTitleField(param, element)}}
            </ui-select-choices>
        </ui-select>
    </div>

    <div ng-switch-when="TABLE_SELECT" ng-hide="vm.hideParam(param)">
        <div class="navbar-form navbar-right">
            <div class="text-right">
                <div class="has-feedback input-group-sm">
                    <input class="form-control" ng-model="param.searchQuery"
                           id="searchQueryrpt-metadata" placeholder="{{param.placeholder}}"
                           ng-change="vm.search($index)">
                    <span class="glyphicon glyphicon-search form-control-feedback"></span>
                </div>
            </div>
        </div>
        <br>
        <br>
        <table datatable="" dt-options="vm.getDtOptions(param, $index)"
               dt-columns="vm.getDtColumns(param, $index)"
               dt-instance="param.dtInstance"
               class="table table-striped table-bordered table-condensed">
        </table>
    </div>

    <input class="form-control" name="{{param.name}}" id="{{param.name}}"
           ng-hide="vm.hideParam(param)" ng-model="param.value" ng-required="vm.getRequired(param)"
           ng-switch-default/>

    <div ng-show="paramsForm.{{param.name}}.$invalid">
        <p class="help-block"
           ng-show="paramsForm.{{param.name}}.$error.required">
            This field is required.
        </p>
    </div>
</div>
