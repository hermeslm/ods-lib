<form name="addressForm" role="form" novalidate ng-submit="vm.save()" show-validation>

    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"
                ng-click="vm.clear()">&times;
        </button>
        <h4 class="modal-title" id="myAddressLabel">Create or edit a Address</h4>
    </div>
    <div class="modal-body">
        <jhi-alert-error></jhi-alert-error>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group" ng-class="{'has-error': addressForm.street.$invalid}">
                    <label class="control-label" for="field_street">Street</label>
                    <input type="text" class="form-control" name="street" id="field_street" ng-required="true"
                           ng-model="vm.address.street" placeholder="Street..." tabindex="1"
                           autocomplete="street-address"/>
                    <div ng-show="addressForm.street.$invalid">
                        <p class="help-block"
                           ng-show="addressForm.street.$error.required">
                            This field is required.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group" ng-class="{'has-error': addressForm.mobile.$invalid}">
                    <label class="control-label" for="field_mobile">Mobile</label>
                    <input type="text" class="form-control" name="mobile" id="field_mobile"
                           ng-model="vm.address.mobile" placeholder="Mobile..." tabindex="7"
                           autocomplete="tel-national" ng-required="true"/>
                    <div ng-show="addressForm.mobile.$invalid">
                        <p class="help-block"
                           ng-show="addressForm.mobile.$error.required">
                            This field is required.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group">
                    <label class="control-label" for="field_street2">Street2</label>
                    <input type="text" class="form-control" name="street2" id="field_street2"
                           ng-model="vm.address.street2" placeholder="Street 2..." tabindex="2"
                           autocomplete="address-line2"/>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label class="control-label" for="field_phone">Phone</label>
                    <input type="text" class="form-control" name="phone" id="field_phone"
                           placeholder="Phone..." tabindex="8" ng-model="vm.address.phone"
                           autocomplete="tel-national"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <div class="form-group" ng-class="{'has-error': addressForm.city.$invalid}">
                    <label class="control-label" for="field_city">City</label>
                    <input type="text" class="form-control" name="city" id="field_city" ng-required="true"
                           ng-model="vm.address.city" placeholder="City..." tabindex="3"
                           autocomplete="address-level2"/>
                    <div ng-show="addressForm.city.$invalid">
                        <p class="help-block"
                           ng-show="addressForm.city.$error.required">
                            This field is required.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group" ng-class="{'has-error': addressForm.country.$invalid}">
                    <label class="control-label" for="field_country">Country</label>
                    <select class="form-control" id="field_country" name="country"
                            ng-model="vm.address.state.country" tabindex="4" ng-required="true"
                            ng-options="country as country.name for country in vm.countries track by country.code"
                            autocomplete="country-name">
                        <option value="" disabled hidden>Country...</option>
                    </select>
                    <div ng-show="addressForm.country.$invalid">
                        <p class="help-block"
                           ng-show="addressForm.country.$error.required">
                            This field is required.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label class="control-label" for="field_fax">Fax</label>
                    <input type="text" class="form-control" name="fax" id="field_fax"
                           ng-model="vm.address.fax" placeholder="Fax..." tabindex="9"
                           autocomplete="fax"/>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <div class="form-group" ng-class="{'has-error': addressForm.zipCode.$invalid}">
                    <label class="control-label" for="field_zipCode">Zip</label>
                    <input type="text" class="form-control" name="zipCode" id="field_zipCode"
                           ng-model="vm.address.zip" placeholder="ZIP" tabindex="5" ng-required="true"
                           autocomplete="postal-code"/>
                    <div ng-show="addressForm.zipCode.$invalid">
                        <p class="help-block"
                           ng-show="addressForm.zipCode.$error.required">
                            This field is required.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-3">
                <div class="form-group" ng-class="{'has-error': addressForm.state.$invalid}">
                    <label class="control-label" for="field_state">State</label>
                    <select class="form-control" id="field_state" name="state"
                            ng-model="vm.address.state" tabindex="6" ng-required="true"
                            ng-options="state as state.name for state in vm.states | filter:{country:vm.address.state.country} track by state.code"
                            autocomplete="state">
                        <option value="" disabled hidden>State...</option>
                    </select>
                    <div ng-show="addressForm.state.$invalid">
                        <p class="help-block"
                           ng-show="addressForm.state.$error.required">
                            This field is required.
                        </p>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group" ng-class="{'has-error': addressForm.email.$invalid}">
                    <label class="control-label" for="field_email">Email</label>
                    <div class="input-group">
                    <span class="input-group-addon" uib-tooltip="Mark it if you don't have email">
                        <input type="checkbox" id="field_nonEmail" name="field_nonEmail" ng-model="vm.nonEmail"
                               ng-click="vm.toggleEmail()" style="position: relative">
                        <label for="field_nonEmail" style="height: 13px;"></label>
                    </span>
                        <input type="email" class="form-control" name="email" id="field_email" ng-required="true"
                               ng-model="vm.address.email" placeholder="Email..." tabindex="10"
                               autocomplete="email"/>
                    </div>
                    <div ng-show="addressForm.email.$invalid">
                        <p class="help-block"
                           ng-show="addressForm.email.$error.required">
                            This field is required.
                        </p>
                        <p class="help-block"
                           ng-show="addressForm.email.$error.email">
                            Email not valid.
                        </p>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12">
                <div class="form-group">
                    <label class="control-label" for="field_notes">Notes</label>
                    <textarea rows="3" class="form-control" name="notes" id="field_notes"
                              ng-model="vm.address.notes" placeholder="Notes..." tabindex="11">
                    </textarea>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal" ng-click="vm.clear()">
            <span class="glyphicon glyphicon-ban-circle"></span>&nbsp;<span>Cancel</span>
        </button>
        <button type="button" ng-click="vm.save()" ng-disabled="addressForm.$invalid || vm.isSaving"
                class="btn btn-primary">
            <span class="glyphicon glyphicon-save"></span>&nbsp;<span>Save</span>
        </button>
    </div>
</form>
